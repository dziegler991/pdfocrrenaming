<html>
<head>
<h2>Upload PDF for OCR</h2>
</head>
<body>
<fieldset><legend><b>Select PDF</b></legend>
Choose a file to be uploaded<br><br>
<form action="" method="post" enctype="multipart/form-data">
<input type="file" accept=".pdf"  name="file[]" multiple />
<br><br>
<input type="submit" name="upload" value="Upload and Convert" /> 
</form>

<!--<form action="" method="post"> -->
<!--<input type="submit" name="convert" value="Convert" />-->
<!--</form> -->

<!--<form action="" method="post"> -->
<!--<input type="submit" name="readtext" value="Read Text" /> -->
<!--</form> -->

<!--<form action="" method="post"> -->
<!--<input type="submit" name="deletepdf" value="Delete All PDFs" /> -->
<!--</form> -->

</fieldset>
</body>
</html> 


<?php
error_reporting(-1);
ini_set('display_errors', 'On');

if (!empty($_POST['upload'])){

ame']);

    foreach ($_FILES['file']['tmp_name'] as $file) {
        echo "$file <br>";
     	    $directory = "/var/www/html/uploads/pdf/";
   	    $filecount = 0;

        //move_uploaded_file($_FILES['file']['tmp_name'], $targetfolder);

        exec("mogrify -format png -density 150 -depth 8 -strip -background white -alpha off $file");
        exec("tesseract -l eng {$file}.png $file");

            $arr = [];
            $contents = file("{$file}.txt");
            $contents1 = implode($contents); 
            preg_match_all("/^\S.*$/m", $contents1, $arr);
            print_r($arr[0][2]);
            echo "<br></br>";
        
    }
}

?>
